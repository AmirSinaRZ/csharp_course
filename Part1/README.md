# جزوه مقدماتی سی‌شارپ (.NET)



---

## 1. پلتفرم دات‌نت چیست؟

**پلتفرم دات‌نت** مجموعه‌ای از ابزارها، کتابخانه‌ها و محیط اجرا (Runtime) هست که توسط مایکروسافت توسعه داده شده تا بتونیم انواع مختلف اپلیکیشن‌ها (وب، دسکتاپ، موبایل، بازی و...) رو بسازیم.

- **اجزاء اصلی:**
  1. **Common Language Runtime (CLR):** موتور اجرای کد
  2. **Framework Libraries:** مجموعه کتابخانه‌های استاندارد (کلاس‌های آماده)
  3. **SDK/CLI Tools:** ابزارهای خط فرمان برای ساخت، کامپایل و مدیریت پروژه

- **ویژگی‌ها:**
  - **چندزبانی:** سی‌شارپ، ویژوال‌بیسیک، F# و ...
  - **مدیریت حافظه خودکار:** garbage collector حافظه‌ی بلااستفاده رو آزاد می‌کنه
  - **امنیت:** کنترل دسترسی به کد و داده
  - **پرتابل:** با نسخه‌های جدید (.NET 5+) روی ویندوز، لینوکس و مک اجرا میشه

> *مثال:* وقتی پروژه‌ای با دستور `dotnet new console` می‌سازید، یک اپلیکیشن کنسول ساده خواهید داشت که با `dotnet run` اجرا میشه.

---

## 2. سی‌شارپ چیست؟

**سی‌شارپ (C#)** یک زبان برنامه‌نویسی شیءگرا و سطح بالا است که بالای CLR طراحی شده. ترکیبی از سادگی و قدرت.

- **ویژگی‌ها:**
  - **ساده و خوانا:** شبیه زبان‌های C و Java
  - **تایپ استاتیک:** نوع متغیرها در زمان کامپایل مشخص میشه
  - **پشتیبانی از بهترین الگوها:** Lambda، LINQ، Async/Await
  - **امنیت نوع:** از بسیاری خطاهای زمان اجرا جلوگیری میشه

- **مثال ابتدایی - Hello World:**
  ```csharp
  using System;

  namespace HelloApp
  {
      class Program
      {
          static void Main(string[] args)
          {
              Console.WriteLine("Hello, World!");
          }
      }
  }

* `using System;` فضای نام System رو وارد می‌کنه که کلاس Console رو داره.
* متد `Main` نقطه شروع هر برنامه سی‌شارپ هست.

---

## 3. CLR چیست و چه کار می‌کند؟

**Common Language Runtime** همون زیرساخت اجرای کدهای دات‌نت هست:

1. **JIT Compilation:**

   * IL (Intermediate Language) رو به کد ماشین رایانه تبدیل می‌کنه.
   * در زمان اجرا (Just-In-Time) صورت می‌گیره.

2. **مدیریت حافظه (Garbage Collection):**

   * تخصیص داینامیک حافظه به آبجکت‌ها
   * پاکسازی خودکار آبجکت‌های بلااستفاده

3. **امنیت کد:**

   * بررسی مجوزها و جلوگیری از اجرای کد مخرب

4. **مدیریت استثناها:**

   * پیاده‌سازی مکانیزم `try/catch/finally`

5. **Interop:**

   * امکان تعامل با کدهای بومی (C++، DLLها)

> مزیت: برنامه‌های سی‌شارپ مستقل از پلتفرم میشن، چون CLR لایه‌ی اجرا رو مدیریت می‌کنه.

---

## 4. متغیرها چیستند و انواع آن‌ها

**متغیر** به قسمتی از حافظه میگیم که میتونیم داده‌ها رو اونجا ذخیره و دستکاری کنیم.

### 4.1 نحوه تعریف

```csharp
<نوع> <نام_متغیر> = <مقدار>;
```

یا بدون مقدار اولیه:

```csharp
int age;
age = 30;
```

### 4.2 انواع داده‌های پایه و کاربردها

| نوع     | سایز | محدوده                 | کاربرد معمول                           |
| ------- | ---- | ---------------------- | -------------------------------------- |
| byte    | 1    | 0 تا 255               | شمارش آیتم‌های کوچک، بایت‌های باینری   |
| int     | 4    | -2e9 تا 2e9            | شمارش عمومی، محاسبات عدد صحیح          |
| long    | 8    | -9e18 تا 9e18          | اعداد بزرگ‌تر                          |
| float   | 4    | \~1e-45 تا \~3e38      | اعداد اعشاری با دقت کم                 |
| double  | 8    | \~5e-324 تا \~1e308    | اعداد اعشاری با دقت بالا               |
| decimal | 16   | \~1e-28 تا \~7.9e28    | مالی و محاسبات دقیق (بدون خطای اعشاری) |
| char    | 2    | یک کاراکتر UTF-16      | یک کاراکتر (حروف، ارقام، علائم)        |
| bool    | 1    | true / false           | شرایط منطقی                            |
| string  | —    | دنباله‌ای از کاراکترها | متن (جمله، پاراگراف)                   |

> *مثال:*
>
> ```csharp
> int score = 100;  
> double price = 19.99;  
> char letter = 'A';  
> bool isActive = true;  
> ```

---

## 5. سرریز (Overflow) و مثال

وقتی نتیجه‌ی یک عملیات عددی بیشتر از بیشینه یا کمتر از کمینه‌ی نوع متغیر باشه، سرریز اتفاق می‌افته.

### 5.1 مثال ساده

```csharp
byte x = 255;
x += 1;  // 255 + 1 = 256 -> تبدیل به 0 میشه (سرریز)
Console.WriteLine(x);  // خروجی: 0
```

### 5.2 کنترل امنیت سرریز

* **checked**: اگر سرریز رخ بده، `OverflowException` پرتاب میشه
* **unchecked**: بدون استثناء و با رفتار دورریز (modulo)

```csharp
try
{
    checked
    {
        byte y = 255;
        y += 1;  // اینجا OverflowException رخ میده
    }
}
catch (OverflowException e)
{
    Console.WriteLine("سرریز رخ داد: " + e.Message);
}
```

---

## 6. تبدیل متغیرها (Casting)

### 6.1 تبدیل ضمنی (Implicit)

* **امن و خودکار**، وقتی دامنه نوع مقصد بزرگ‌تر باشه.

```csharp
int a = 123;
long b = a;    // درست، داده از int به long میره
float f = a;   // درست، داده از int به float میره
```

### 6.2 تبدیل صریح (Explicit)

* **ممکنه داده حذف بشه یا دچار سرریز بشه**.

```csharp
double pi = 3.1415;
int i = (int)pi;  // نتیجه: 3 (بخش اعشاری حذف میشه)

int big = 1000;
byte small = (byte)big;  // 1000 % 256 = 232 (ممکنه سرریز رخ بده)
```

> *نکته:* همیشه هنگام تبدیل صریح مراقب باشید. می‌تونید از `checked((byte)big)` استفاده کنید تا خطا رو بگیرید.

---

## 7. عملگرها در سی‌شارپ

### 7.1 دسته‌بندی کلی

| نوع عملگر        | عملگرها                             | توضیح                                          |                   |                        |
| ---------------- | ----------------------------------- | ---------------------------------------------- | ----------------- | ---------------------- |
| حسابی            | `+`, `-`, `*`, `/`, `%`, `++`, `--` | جمع، تفریق، ضرب، تقسیم، باقیمانده، افزایش/کاهش |                   |                        |
| تخصیص            | `=`, `+=`, `-=`, `*=`, `/=`, `%=`   | اختصاص مقدار و ترکیب با عمل حسابی              |                   |                        |
| مقایسه‌ای        | `==`, `!=`, `>`, `<`, `>=`, `<=`    | برابر/نابرابر، بزرگ‌تر، کوچک‌تر                |                   |                        |
| منطقی            | `&&`, \`                            |                                                | `, `!\`           | و منطقی، یا منطقی، نقض |
| بیتی             | `&`, \`                             | `, `^`, `\~`, `<<`, `>>\`                      | عملیات روی بیت‌ها |                        |
| شرطی (?:)        | `condition ? first : second`        | انتخاب مقدار بر اساس شرط                       |                   |                        |
| Null-coalescing  | `??`, `??=`                         | مقداردهی جایگزین اگر سمت چپ null باشد          |                   |                        |
| Null-conditional | `?.`, `?[]`, `?()`                  | دسترسی امن به اعضای آبجکت‌های nullable         |                   |                        |

### 7.2 مثال‌ها

```csharp
int a = 10, b = 3;
Console.WriteLine(a + b);  // 13
Console.WriteLine(a % b);  // 1 (باقیمانده)

bool c = (a > b) && (b > 0);
Console.WriteLine(c);       // True

int? n = null;
int m = n ?? 5;            // اگر n null باشه، m=5

string s = null;
int len = s?.Length ?? 0;  // دسترسی امن و مقدار پیشفرض
```

---

## 8. کنترل جریان در سی‌شارپ

### 8.1 if / else

```csharp
int score = 85;

if (score >= 90)
{
    Console.WriteLine("نمره عالی");
}
else if (score >= 75)
{
    Console.WriteLine("نمره خوب");
}
else
{
    Console.WriteLine("نیاز به تلاش بیشتر");
}
```

### 8.2 switch

```csharp
char grade = 'B';
switch (grade)
{
    case 'A':
        Console.WriteLine("عالی");
        break;
    case 'B':
    case 'C':
        Console.WriteLine("خوب");
        break;
    case 'D':
        Console.WriteLine("قابل قبول");
        break;
    default:
        Console.WriteLine("نامعتبر");
        break;
}
```

### 8.3 switch expression

```csharp
int dayOfWeek = 3;
string dayName = dayOfWeek switch
{
    1 => "شنبه",
    2 => "یک‌شنبه",
    3 => "دو‌شنبه",
    4 => "سه‌شنبه",
    5 => "چهار‌شنبه",
    6 => "پنج‌شنبه",
    7 => "جمعه",
    _ => "نامعتبر"
};
Console.WriteLine(dayName);  // خروجی: دو‌شنبه
```
